#!/usr/bin/env python3
import os
import sys
import subprocess

def setup_project():
    """Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"""
    print("âš™ï¸  Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø¨ÙˆØª...")
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª
    folders = [
        "temp_files/ads",
        "temp_files/group_replies",
        "temp_files/random_replies",
        "database",
        "handlers",
        "managers",
        "utils"
    ]
    
    for folder in folders:
        os.makedirs(folder, exist_ok=True)
        print(f"âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯: {folder}")
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù __init__.py ÙÙŠ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª
    init_files = [
        "database/__init__.py",
        "handlers/__init__.py",
        "managers/__init__.py",
        "utils/__init__.py"
    ]
    
    for init_file in init_files:
        with open(init_file, 'w') as f:
            f.write('')
        print(f"âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡: {init_file}")
    
    # ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
    print("ğŸ“¦ Ø¬Ø§Ø±ÙŠ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª...")
    try:
        subprocess.check_call([sys.executable, "-m", "pip", "install", "-r", "requirements.txt"])
        print("âœ… ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!")
    except subprocess.CalledProcessError:
        print("âŒ ÙØ´Ù„ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª")
        sys.exit(1)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    from database.database import BotDatabase
    db = BotDatabase()
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")
    
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙƒÙ†
    from config import validate_config
    if validate_config():
        print("âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØµØ­ÙŠØ­Ø©!")
    else:
        print("âŒ Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª")
        sys.exit(1)
    
    print("\nğŸ‰ ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­!")
    print("ğŸš€ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª: python main.py")

if __name__ == "__main__":
    setup_project()
